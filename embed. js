(function() {
  const script = document.currentScript;
  const format = script.getAttribute("data-format") || "billboard";

  // Replace this URL with your real-time API endpoint
  const API_URL = "https://api.coingecko.com/api/v3/simple/price?ids=qr-coin&vs_currencies=usd";

  fetch(API_URL)
    .then(res => res.json())
    .then(data => {
      const price = data['qr-coin']?.usd || "N/A";
      const container = document.createElement('div');
      container.style.cssText = "font-family:sans-serif;padding:15px;margin:10px;border-radius:10px;box-shadow:0 4px 6px rgba(0,0,0,0.1);";

      if (format === "billboard") {
        container.style.background = "#111";
        container.style.color = "#0f0";
        container.innerHTML = `
          <h2 style="font-size:2rem;">QR Coin Today</h2>
          <p style="font-size:3rem;">${price}</p>
        `;
      }

      else if (format === "hero") {
        container.style.background = "linear-gradient(to right, #4facfe, #00f2fe)";
        container.style.color = "#fff";
        container.innerHTML = `
          <h1 style="font-size:3rem;">QR Coin Point: ${price}</h1>
          <small>Live from API</small>
        `;
      }

      else if (format === "carousel") {
        container.innerHTML = `
          <div style="display:flex;overflow-x:auto;gap:20px;">
            <div style="min-width:200px;padding:10px;background:#eee;border-radius:8px;">
              <strong>QR Coin</strong>
              <div>${price}</div>
            </div>
            <div style="min-width:200px;padding:10px;background:#ccc;border-radius:8px;">Volume: Coming Soon</div>
            <div style="min-width:200px;padding:10px;background:#bbb;border-radius:8px;">Market Cap: Coming Soon</div>
          </div>
        `;
      }

      script.parentNode.insertBefore(container, script);
    })
    .catch(err => {
      console.error("QR Coin widget error:", err);
    });
})();
